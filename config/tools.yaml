version: "1.0"
tools:
  - id: filesystem
    name: Filesystem Server
    description: MCP filesystem access
    command: node
    args: ["node_modules/@modelcontextprotocol/server-filesystem/dist/index.js", "${DATA_DIR}"]
    resource_limits:
      auto_restart: true
      max_restarts: 3
  - id: core-memory-bridge
    name: Core Memory Bridge
    command: node
    args:
      - node_modules/ts-node/dist/bin.js
      - src/core-bridge.ts
    env:
      CORE_API_KEY: ${CORE_API_KEY}
    resource_limits:
      auto_restart: true
      max_restarts: 5
      max_memory_mb: 512

  - id: hmc-core
    name: HMC (Python Core)
    command: python3
    args:
      - src/hmc/server.py
    env:
      RAILWAY_VOLUME_MOUNT_PATH: ${DATA_DIR}
      SANITY_API_KEY: ${SANITY_API_KEY}
    resource_limits:
      auto_restart: true
      max_restarts: 3
      max_memory_mb: 2048
      max_cpu_percent: 80

  # - id: chrome-devtools
  #   name: Chrome DevTools
  #   description: Headless Chrome for web interaction
  #   command: npx
  #   args: ['-y', 'chrome-devtools-mcp@latest', '--headless']
  #   resource_limits:
  #     auto_restart: true
  #     max_restarts: 3

  # - id: exa
  #   name: Exa Search
  #   description: AI-powered search engine
  #   command: npx
  #   args: ['-y', 'exa-mcp-server']
  #   env:
  #     EXA_API_KEY: ${EXA_API_KEY}
  #   resource_limits:
  #     auto_restart: true
  #     max_restarts: 3

  # - id: genkit
  #   name: Genkit
  #   description: Firebase Genkit MCP Server
  #   command: npx
  #   args: ['-y', 'genkit-cli@^1.22.0', 'mcp']
  #   resource_limits:
  #     auto_restart: true
  #     max_restarts: 3
